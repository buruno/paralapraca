{% extends 'base.html' %}
{% load i18n %}
{% load is_coordinator %}
{% load pipeline %}

{% block js %}
    {{ block.super }}
    {% javascript 'timtec-discussion' %}
{% endblock %}

{% block body_attrs %}
  ng-app="timtec.discussion"
{% endblock %}

{% block content %}

<div ng-controller="TopicCtrl">

    {% verbatim %}
    <section class="forums forums-page forums-widget thread widget container-fluid">
        <div class="widget-topbar">
            <div class="line">
                <div class="pull-left">
                    <h2 class="title">Fóruns > Avante e Entremeios</h2>
                </div>
                <div class="pull-right">
                    <a href="/discussion/forum/" class="btn btn-link goback"><span>voltar para os tópicos</span></a>
                </div>
            </div>
        </div>

        <div class="line one-column">
            <div class="column">
                <div class="forum-thread" ng-cloak>
                    <div class="user-icon">
                        <img src="http://placehold.it/40" alt="Joana Terra">
                    </div>
                    <div class="info">
                        <h4 class="thread-header"><span class="thread-title">{{ topic.title }}</span> por <span class="user-name"> {{ topic.author.name }}</span></h4>
                    </div>
                    <div class="tags">
                        <a href="#" class="tag" ng-repeat="tag in topic.tags">#{{ tag.name }}</a>
                        <a href="#" class="tag">#lorem</a>
                    </div>

                    <div class="thread-post" ng-bind-html="topic.content"></div>

                    <div class="actions">
                        <div class="pull-left">
                            <a ng-click="topic_like(topic)" ng-class="{ 'active': topic.user_like }" class="action liked">gostei</a>
                            <!--<a class="action used">usar</a>-->
                            <a ng-click="topic.show_comment_input=true" class="action replies">comentar</a>
                        </div>
                        <div class="pull-right">
                            <span class="action liked">{{ topic.count_likes }} curtiram</span>
                            <!--<span class="action used">7 usaram</span>-->
                            <span class="action replies">{{ topic.count_replies }} respostas</span>
                        </div>
                    </div>

                    <form class="comments-form" ng-if="topic.show_comment_input">
                        <!--<div class="tools">-->
                            <!--<button class="bold"><span class="sr-only">negrito</span><span aria-hidden="true">N</span></button>-->
                            <!--<button class="italic"><span class="sr-only">itálico</span><span aria-hidden="true">I</span></button>-->
                            <!--<button class="underline"><span class="sr-only">sublinhado</span><span aria-hidden="true">S</span></button>-->
                            <!--<button><span class="sr-only">inserir imagem</span><i class="fa fa-picture-o" aria-hidden="true"></i></button>-->
                            <!--<button><span class="sr-only">inserir vídeo</span><i class="fa fa-youtube" aria-hidden="true"></i></button>-->
                        <!--</div>-->
                        <textarea ui-tinymce="tinymceOptions"
                                  ng-model="new_comment"
                                  placeholder="Escreva aqui o seu comentário"></textarea>
                        <button class="btn btn-xs btn-success reply">comentar</button>
                        <button class="btn btn-xs btn-danger delete">descartar</button>
                    </form>

                    <div class="comments">
                        <h3 class="comments-title">Comentários</h3>
                        <div class="thread" ng-repeat="comment in topic.comments">
                            <div class="user-icon">
                                <img src="http://placehold.it/40" alt="Maria Alice dos Anjos">
                            </div>
                            <div class="info">
                                <span class="user-name">{{ comment.author.name }}</span>
                                <div class="comment-post" ng-bind-html="comment.text"></div>
                            </div>
                            <div class="actions">
                                <div class="pull-left">
                                    <a ng-click="comment_like(comment)"
                                       ng-class="{ 'active': comment.user_like }"
                                       class="action liked">gostei</a>
                                    <a ng-click="comment.show_comment_input=true" class="action replies">comentar</a>
                                </div>
                                <div class="pull-right">
                                    <span class="action liked">{{ comment.count_likes }} curtiram</span>
                                    <!--<span class="action replies">30 respostas</span>-->
                                </div>
                            </div>

                            <div class="thread" ng-repeat="reply in comment.comment_replies">
                                <div class="user-icon">
                                    <img src="http://placehold.it/40" alt="Roberta Reis">
                                </div>
                                <div class="info">
                                    <span class="user-name">{{ reply.author.name }}</span>
                                    <div class="comment-post" ng-bind-html="reply.text"></div>
                                    <!--<div class="comment-post">-->
                                        <!--<form class="comments-form">-->
                                            <!--<div class="tools">-->
                                                <!--<button class="bold"><span class="sr-only">negrito</span><span aria-hidden="true">N</span></button>-->
                                                <!--<button class="italic"><span class="sr-only">itálico</span><span aria-hidden="true">I</span></button>-->
                                                <!--<button class="underline"><span class="sr-only">sublinhado</span><span aria-hidden="true">S</span></button>-->
                                                <!--<button><span class="sr-only">inserir imagem</span><i class="fa fa-picture-o" aria-hidden="true"></i></button>-->
                                                <!--<button><span class="sr-only">inserir vídeo</span><i class="fa fa-youtube" aria-hidden="true"></i></button>-->
                                            <!--</div>-->
                                            <!--<textarea>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur auctor lacinia sem, eu cursus sem malesuada eu. Duis blandit accumsan metus ac auctor.</textarea>-->
                                            <!--<button class="btn btn-xs btn-success reply">comentar</button>-->
                                            <!--<button class="btn btn-xs btn-danger delete">descartar</button>-->
                                        <!--</form>-->
                                    <!--</div>-->
                                </div>
                                <div class="actions">
                                    <div class="pull-left">
                                        <a ng-click="comment_like(reply)"
                                           ng-class="{ 'active': reply.user_like }"
                                           class="action liked">gostei</a>
                                        <a ng-click="reply.show_comment_input=true" class="action replies">comentar</a>
                                    </div>
                                    <div class="pull-right">
                                        <span class="action liked">{{ reply.count_likes }} curtiram</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
    {% endverbatim %}

</div>

{% endblock %}

{% extends 'base.html' %}
{% load i18n %}
{% load is_coordinator %}
{% load pipeline %}

{% block js %}
    {{ block.super }}
    {% javascript 'timtec-discussion' %}
{% endblock %}

{% block body_attrs %}
  ng-app="timtec.discussion"
{% endblock %}

{% block content %}

<div ng-controller="ForumCtrl" ng-cloak>

    <section class="forums forums-page forums-widget widget container-fluid">
        <div class="widget-topbar line one-column">
            <div class="column">
                <button class="btn btn-link clean">limpar filtro</button>
                <button class="btn btn-link filter">filtrar por tags e categorias</button>
            </div>
        </div>

        <header class="widget-header line two-column fifty-fifty">
            <div class="column">
                <h2 class="widget-title">fóruns</h2>
            </div>
            <div class="column">
                <form class="widget-filter form-inline">
                    <input class="form-control" type="text" placeholder="Busca nos fóruns...">
                </form>
            </div>
        </header>

        <div class="line one-column">
            <div class="column">
                <h3 class="section-title">últimas postagens</h3>
            </div>
        </div>

        <div class="line two-column fifty-fifty">
          {% verbatim %}
            <div class="user-update column" ng-repeat="topic in latest_topics">
                <div class="user-icon">
                    <img src="http://placehold.it/40" alt="{{ topic.author.name }}">
                    <!--<img ng-src="{{ topic.author.picture }}"-->
                             <!--err-src="http://placehold.it/40"-->
                             <!--alt="{{ topic.author.name }}">-->
                </div>
                <div class="info">
                    <b>{{ topic.author.name }}</b> comentou no tópico <a href="/discussion/topic/##{{ topic.id }}" class="thread-name">{{ topic.title }}</a> no fórum <a href="#">{{ topic.forum.title }}</a></span>
                </div>
                <div class="actions">
                    <span class="action replies">{{  topic.count_replies }} resposta</span>
                    <span class="action liked">{{ topic.count_likes }} gostaram</span>
                </div>
            </div>
          {% endverbatim %}
            <div class="user-update column">
                <div class="user-icon">
                    <img src="http://placehold.it/40" alt="Carla Marques">
                </div>
                <div class="info">
                    <b>Carla Marques</b> comentou no tópico <a href="" class="thread-name">Curso de Mediação</a> no fórum <a href="#">Lorem ipsum dolor sit amet...</a></span>
                </div>
                <div class="actions">
                    <span class="action replies">1 resposta</span>
                    <span class="action liked">4 gostaram</span>
                </div>
            </div>
            <div class="user-update column">
                <div class="user-icon">
                    <img src="http://placehold.it/40" alt="Carla Marques">
                </div>
                <div class="info">
                    <b>Carla Marques</b> criou o tópico <a href="#" class="thread-name">Curso de Mediação</a> no fórum <a href="#">Experiências Pedagógicas</a></span>
                </div>
            </div>
        </div>

        {% verbatim %}
        <div ng-repeat="forum in forums">
            <div class="line one-column">
                <div class="column">
                    <h3 class="section-title">{{ forum.title }}</h3>
                </div>
            </div>

            <div class="forum-list">
                <table>
                    <thead>
                        <tr>
                            <th>tópico</th>
                            <th>reações</th>
                            <th>categorias</th>
                            <th>tags</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="topic in forum.latest_topics">
                            <td>
                                <a ng-href="/discussion/topic/##{{ topic.id }}"><span class="thread-name">{{ topic.title }}</span></a>
                                <span class="last-update">Última atividade em <b>{{ topic.last_update | date: "dd/MM/yyyy' às 'HH:mm"}}</b></span>
                            </td>
                            <td>
                                <span class="action replies small">{{ topic.count_replies }}</span>
                                <span class="action liked small">{{ topic.count_likes }}</span>
                            </td>
                            <td>
                                <span ng-repeat="category in topic.categories" class="category">{{ category.name }}</span>
                            </td>
                            <td>
                                <div class="tags">
                                    <span ng-repeat="tag in topic.tags" class="tag">{{ tag.name }}</span>
                                </div>
                            </td>
                        </tr>
                        <!--<tr class="new">-->
                            <!--<td>-->
                                <!--<span class="thread-name">Lorem ipsum dolor sit amet</span>-->
                                <!--<span class="last-update">Última atividade <b>há 2 horas</b></span>-->
                            <!--</td>-->
                            <!--<td>-->
                                <!--<span class="action replies small">1</span>-->
                                <!--<span class="action liked small">4</span>-->
                                <!--<span class="action used small">7</span>-->
                            <!--</td>-->
                            <!--<td>-->
                                <!--<span class="category discussion">discussão</span>-->
                            <!--</td>-->
                            <!--<td>-->
                                <!--<div class="tags">-->
                                    <!--<span class="tag">#lorem</span><span class="tag">#ipsum</span><span class="tag">#lorem</span>-->
                                <!--</div>-->
                            <!--</td>-->
                        <!--</tr>-->
                    </tbody>
                </table>
            </div>
        </div>
        {% endverbatim %}

    </section>

</div>

{% endblock %}
